const canvas=document.getElementById('scene');const ctx=canvas.getContext('2d');const playBtn=document.getElementById('play');const W=canvas.width,H=canvas.height;let state='idle',t=0;const blue=new Image(),red=new Image();blue.src='assets/sprites/warrior_blue.svg';red.src='assets/sprites/warrior_red.svg';const ease=(x)=>1-Math.pow(1-x,3);function drawAura(x,y,c){ctx.strokeStyle=c;ctx.lineWidth=4;ctx.beginPath();ctx.arc(x,y,34+Math.sin(t/6)*6,0,Math.PI*2);ctx.stroke()}function drawSprite(img,x,y,scale=1){const s=128*scale;ctx.drawImage(img,x-s/2,y-s/2,s,s)}function drawBeam(x1,y1,x2,y2,c){ctx.strokeStyle=c;ctx.lineWidth=10;ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke()}function reset(){state='idle';t=0}function animate(){ctx.clearRect(0,0,W,H);const ly=300,ry=300;const lx=110,rx=W-110;if(state==='idle'){drawSprite(blue,lx,ly,0.7);drawSprite(red,rx,ry,0.7)}if(state==='charge'){drawSprite(blue,lx,ly,0.7);drawSprite(red,rx,ry,0.7);drawAura(lx,ly,'#66a3ff');drawAura(rx,ry,'#ff6a5e');if(t>50)state='fire'}if(state==='fire'){drawSprite(blue,lx,ly,0.7);drawSprite(red,rx,ry,0.7);const k=Math.min(1,(t-50)/30);drawBeam(lx+40,ly, W/2,ly,'#8fd3ff');drawBeam(rx-40,ry, W/2,ry,'#ffb3a7');if(t>90)state='clash'}if(state==='clash'){const r=30+Math.sin(t)*10;ctx.fillStyle='#fff';ctx.beginPath();ctx.arc(W/2,ly,r,0,Math.PI*2);ctx.fill();if(t>130)reset()}t++;requestAnimationFrame(animate)}playBtn.onclick=()=>{reset();state='charge'};animate();